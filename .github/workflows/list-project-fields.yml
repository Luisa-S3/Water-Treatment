name: list project fields
on: 
 workflow_dispatch:


jobs:
  list-fields:
    runs-on: ubuntu-latest
    steps:
      - name: List fields in user project
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GH_PROJECT_TOKEN }}
          script: |
            const username = "Luisa-S3"; // <- CÃ¡mbialo por tu nombre de usuario
            const projectNumber = 1;       // <- CÃ¡mbialo por el nÃºmero que aparece en la URL

            const result = await github.graphql(`
              query($login: String!, $number: Int!) {
                user(login: $login) {
                  projectV2(number: $number) {
                    id
                    title
                    fields(first: 50) {
                      nodes {
                      __typename
                      ... on ProjectV2FieldCommon {
                        id
                        name
                        }
                        ... on ProjectV2SingleSelectField {
                        dataType
                        }
                        ... on ProjectV2TextField {
                        dataType
                        }
                        ... on ProjectV2NumberField {
                        dataType
                        }
                          ... on ProjectV2DateField {
                        dataType
                        ... on ProjectVIterationField {
                        dataType
                        }
                      }
                    }
                  }
                }
              }
            `, {
              login: username,
              number: projectNumber
            });

            console.log("ðŸ“Œ Project title:", result.user.projectV2.title);
            console.log("ðŸ†” Project ID:", result.user.projectV2.id);
            console.log("ðŸ“‹ Campos:");
            for (const field of result.user.projectV2.fields.nodes) {
              console.log(`âž¡ï¸  ${field.name} | ID: ${field.id} | Tipo: ${field.dataType}`);
            }
